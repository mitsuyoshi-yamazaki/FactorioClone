# コミットノート: 1fcf959

## ユーザープロンプト（指示）

coding-guidelines.mdとstatic-code-analysis.mdに記載の内容に沿うように、既存のコードを変更せよ

## 実行内容

### 1. ESLint/Prettier設定ファイルの作成

**eslint.config.mjs**:
- JavaScript基本ルール（js.configs.recommended）
- TypeScript厳格ルール（strict, recommended-type-checked, stylistic-type-checked）
- カスタムルール：prefer-const, no-var, eqeqeq, curly
- TypeScript固有ルール：no-unused-vars, prefer-function-type, consistent-type-definitions
- 厳格な真偽値チェック（strict-boolean-expressions）

**.prettierrc**:
- セミコロンなし、ダブルクォート使用
- タブ幅2、トレイリングコンマes5
- 行幅100、bracket spacing有効

**package.json**:
- lintスクリプトを `eslint .` に統一
- format関連スクリプト追加（format, format:check, type-check）

### 2. 既存コードのガイドライン準拠

**src/Game.ts**:
- **型安全性向上**: any型を具体的な型（DebugAPI, GameState, DebugActionResult）に置換
- **命名規約**: private変数に`_`プレフィックス（_app, _initialized, _gameLoop）
- **関数定義スタイル**: function宣言をconst + arrow functionに変更
- **null/undefinedチェック**: `!= null`の使用
- **immutable指向**: readonly修飾子の追加

**src/main.ts**:
- **型定義改善**: window.__debugの型をReturnType<Game['getDebugAPI']>に具体化
- **関数定義スタイル**: async function → const + arrow functionに変更

### 3. テストファイル構造の再編

**ファイル配置変更**:
- tests/unit/Game.test.ts → src/Game.test.ts（テスト対象と同ディレクトリ）
- 空のtests/unitディレクトリを削除

**テストコード修正**:
- `it()` → `test()`に変更（ガイドライン準拠）
- インポートパス修正：`@/Game` → `./Game`

**設定ファイル更新**:
- jest.config.js: src/**/*.test.tsをテストパターンに追加
- package.json: test:unitスクリプトを新構造に対応

### 4. 重複設定の修正

**jest.config.js**:
- 重複していたmoduleNameMappingを統合
- testMatchパターンを拡張

## 効果

1. **型安全性の向上**: any型の排除により、コンパイル時エラー検出が強化
2. **コード品質の統一**: ESLint厳格ルールによる一貫したコーディングスタイル
3. **保守性の向上**: ガイドライン準拠による可読性・理解しやすさの向上
4. **テスト効率化**: テストファイルと実装ファイルの近接配置
5. **開発体験改善**: Prettier自動フォーマットによる手作業削減

このコミットにより、プロジェクトは一貫したコーディング規約に基づく高品質なコードベースとなった。